# Malware Analysis Lab 
    A complete beginner's guide to the world of Malware Analysis

<h2>üìùFull Project Overview</h2>
Malware Analysis refers to the process of gathering data and developing a greater understanding of suspicious executables, files, and applications. In the cybersecurity industry, Malware analysis is highly effective as it may help with improving threat detection and alerts, revealing hidden indicators of compromise, and provide further understanding of past exploits to create better defense evasion techniques. 

<br>In this project, we will take a deeper understanding of malware analysis by enhancing comprehension by using real world exposure to malware. Common tools and techniques that practicioners use for malware analysis will be demonstrated throughout the project in order to familiarize oneself with malware analysis in a real-world scenario. Malware analysis labs may be either self-hosted or cloud-hosted, but this in this project specifically a self-hosted lab will be utilized.

<h2>üéØGoals Summarized</h2>
- <b>Learn the key fundamentals of malware analysis as well as developing further understanding of how to detect IOCs</b>
<br>- <b>Develop a greater understanding of the types of malware analysis used</b>
<br>- <b>Investigate samples of malware in a safe, isolated environment to provide real-world exposure to malware analysis</b>
<br>- <b>Investigate how malware communicates with the attacker, and what harmful actions it may carry out towards the infected system</b>

<h2>üîçTypes of Malware Analysis</h2>
<h3>Static Analysis</h3>
* Refers to the process of investigating malware without the need of deploying malware. This technique is used for the extraction of metadata from potentially suspicious files, application, or executables. Typically during static analysis, cybersecurity analysts may extract data such as file names, hashes, strings, IPs, headers, etc.

<h3>Dynamic Analysis</h3>
* Refers to the procedure of running the malware in real-time. This is performed in a sandbox environment, a safe environment made for deploying malware, which is then used by cybersecurity practicioners to examine the effects of the sample in real-time. It provides further understanding into how the malware operates and affects the system as it runs, while also helping cybersecurity practioners develop a greater understanding of functionality and behavior.

<h3>Hybrid Analysis</h3>
* Refers to a combination of both static and dynamic analysis. This is typically used more often compared to the other two methods mentioned above as it provides a much clearer "picture" of the malware as a whole. Malware analysts can review IOCs, while also simultaneously learning the sample's functionality in real-time as it runs.

<h3>Behavior Analysis</h3>
* Process of analyzing malware after it has been executed. Involves monitoring registry entries, network processes, and overall after-effects of the malware after it was executed. 

<h2>üö∂Brief Project Walkthrough</h2>

The project is separated into two parts. In this portion of the project we will:
<br>- <b>Create a virtual machine setup within our host machine</b>
<br>- <b>Create a host-only network so that our machines can communicate with each other</b>
<br>- <b>Utilize the Windows and Linux terminals</b>

<h2>üõ†Ô∏èTools Required</h2>
- Windows 10/11 host OS</b>

<h2>Project Walkthrough</h2>

### Installations
1. Install [VirtualBox](https://www.virtualbox.org/wiki/Downloads)
2. Install [Windows 10 Enterprise](https://info.microsoft.com/ww-landing-windows-10-enterprise.html)
3. Install [REMnux](https://docs.remnux.org/install-distro/get-virtual-appliance)

### Setting up Windows 10 VM
1. Go to VirtualBox -> New. VM requires 60.00GB allocated, but 75.00GB is recommended. Start Windows 10 and attach .iso file.
2. Perform custom installation and partition another disk. Default settings is fine.
![image](https://i.gyazo.com/1b84a7cd7d34640557bee436584b799c.png)

3. Do "domain join instead"
<img src="https://i.gyazo.com/48282d01de4208a66d549cb3eb1071db.png" width="600" height="400">

4. Opt out of all privacy settings.

6. For full screening capability
<img src="https://i.gyazo.com/835af2be536468e1593aea1cc0d0a006.png" width="250" height="200">
Devices -> Insert Guest Additions CD image

Go to "This PC" -> CD Drive Virtualization -> Run "VBoxWindowsAdditions-amd64 -> Reboot

### Setting up FlareVM
7. Install Web Browser of choice on VM
#### Disable Proxy Auto Detect Setting
   8. Windows Search Bar -> proxy settings
   9. Switch "Automatically detect settings" button off
#### Disable Windows Defender
Disable Tamper Protection
<br>10. Search "Defender", open Defender settings and set all Defender Settings to off.

Disable Windows Defender in GPO
<br>11. In the Windows Search Bar, search and select "edit group policy"
<br>12. In GPO, navigate to ‚Üí Administrative Templates ‚Üí Windows Components ‚Üí Microsoft Defender
<br>13. Antivirus ‚Üí Enable ‚ÄúTurn off Microsoft Defender Antivirus‚Äù

Disable Windows Firewall
<br>14. GPO ‚Üí Administrative Templates ‚Üí Network ‚Üí Network Connections ‚Üí Windows Defender
<br>15. Firewall ‚Üí Domain Profile ‚Üí Disable ‚ÄúProtect All Network Connections‚Äù
<br>16. Do the same but for the Standard profile

<b>Take a Snapshot</b>

#### Dowloading + Installing FlareVM
17. Go to powershell, run as administrator
18. Type in <code>cd C:\Users\"username"\Desktop</code>
19. Type in <code>Clear</code>
20. Run <code>(New-Object
net.webclient).DownloadFile('https://raw.githubusercontent.com/mandiant/flarevm/main/install.ps1',"$([Environment]::GetFolderPath("Desktop"))\\install.ps1")</code>
21. Run <code>Unblock-File .\\install.ps1</code>
22. Run <code>Set-ExecutionPolicy Unrestricted</code>. Accept prompt
23. Run <code>.\\install.ps1</code>

<b>Take a snapshot</b>

### VirtualBox Network Settings
24. Create new host only network































